{% doc %}
  @prompt
    A heading with the categories on the left, logo in the center, and icons on the right
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-header-{{ ai_gen_id }} {
    width: 100%;
    background-color: {{ block.settings.background_color }};
    border-bottom: {{ block.settings.border_thickness }}px solid {{ block.settings.border_color }};
    position: {{ block.settings.position }};
    top: 0;
    left: 0;
    z-index: 1000;
    padding: {{ block.settings.padding_vertical }}px 0;
  }

  .ai-header-container-{{ ai_gen_id }} {
    max-width: {{ settings.page_width }}px;
    margin: 0 auto;
    padding: 0 20px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 20px;
  }

  .ai-header-categories-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: {{ block.settings.category_spacing }}px;
    justify-self: start;
  }

  .ai-header-category-link-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    text-decoration: none;
    font-size: {{ block.settings.category_font_size }}px;
    font-weight: {{ block.settings.category_font_weight }};
    font-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
    transition: color 0.3s ease;
    white-space: nowrap;
  }

  .ai-header-category-link-{{ ai_gen_id }}:hover {
    color: {{ block.settings.text_hover_color }};
  }

  .ai-header-logo-{{ ai_gen_id }} {
    justify-self: center;
    display: flex;
    align-items: center;
  }

  .ai-header-logo-link-{{ ai_gen_id }} {
    display: block;
    line-height: 0;
  }

  .ai-header-logo-image-{{ ai_gen_id }} {
    height: {{ block.settings.logo_height }}px;
    width: auto;
    max-width: 100%;
  }

  .ai-header-logo-placeholder-{{ ai_gen_id }} {
    height: {{ block.settings.logo_height }}px;
    width: 200px;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
  }

  .ai-header-logo-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 180px;
    max-height: calc({{ block.settings.logo_height }}px - 20px);
  }

  .ai-header-icons-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: {{ block.settings.icon_spacing }}px;
    justify-self: end;
  }

  .ai-header-icon-link-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: color 0.3s ease;
    font-size: {{ block.settings.icon_font_size }}px;
    font-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
  }

  .ai-header-icon-link-{{ ai_gen_id }}:hover {
    color: {{ block.settings.text_hover_color }};
  }

  .ai-header-icon-{{ ai_gen_id }} {
    width: {{ block.settings.icon_size }}px;
    height: {{ block.settings.icon_size }}px;
    flex-shrink: 0;
  }

  .ai-header-icon-text-{{ ai_gen_id }} {
    font-weight: {{ block.settings.icon_font_weight }};
  }

  @media screen and (max-width: 990px) {
    .ai-header-container-{{ ai_gen_id }} {
      grid-template-columns: auto 1fr auto;
      gap: 15px;
    }

    .ai-header-categories-{{ ai_gen_id }} {
      gap: {{ block.settings.category_spacing | times: 0.7 }}px;
    }

    .ai-header-category-link-{{ ai_gen_id }} {
      font-size: {{ block.settings.category_font_size | times: 0.9 }}px;
    }

    .ai-header-logo-image-{{ ai_gen_id }},
    .ai-header-logo-placeholder-{{ ai_gen_id }} {
      height: {{ block.settings.logo_height | times: 0.8 }}px;
    }

    .ai-header-icons-{{ ai_gen_id }} {
      gap: {{ block.settings.icon_spacing | times: 0.7 }}px;
    }

    .ai-header-icon-{{ ai_gen_id }} {
      width: {{ block.settings.icon_size | times: 0.9 }}px;
      height: {{ block.settings.icon_size | times: 0.9 }}px;
    }

    .ai-header-icon-text-{{ ai_gen_id }} {
      display: none;
    }
  }

  @media screen and (max-width: 749px) {
    .ai-header-container-{{ ai_gen_id }} {
      padding: 0 15px;
      gap: 10px;
    }

    .ai-header-categories-{{ ai_gen_id }} {
      gap: {{ block.settings.category_spacing | times: 0.5 }}px;
    }

    .ai-header-category-link-{{ ai_gen_id }} {
      font-size: {{ block.settings.category_font_size | times: 0.8 }}px;
    }

    .ai-header-logo-image-{{ ai_gen_id }},
    .ai-header-logo-placeholder-{{ ai_gen_id }} {
      height: {{ block.settings.logo_height | times: 0.7 }}px;
    }

    .ai-header-logo-placeholder-{{ ai_gen_id }} {
      width: 150px;
    }

    .ai-header-icons-{{ ai_gen_id }} {
      gap: {{ block.settings.icon_spacing | times: 0.5 }}px;
    }

    .ai-header-icon-{{ ai_gen_id }} {
      width: {{ block.settings.icon_size | times: 0.8 }}px;
      height: {{ block.settings.icon_size | times: 0.8 }}px;
    }
  }
{% endstyle %}

<header-block-{{ ai_gen_id }} class="ai-header-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-header-container-{{ ai_gen_id }}">
    <nav class="ai-header-categories-{{ ai_gen_id }}" role="navigation" aria-label="Main navigation">
      {% for i in (1..4) %}
        {% liquid
          assign category_text_key = 'category_' | append: i | append: '_text'
          assign category_link_key = 'category_' | append: i | append: '_link'
          assign category_text = block.settings[category_text_key]
          assign category_link = block.settings[category_link_key]
        %}
        
        {% if category_text != blank %}
          <a 
            href="{{ category_link | default: '#' }}" 
            class="ai-header-category-link-{{ ai_gen_id }}"
          >
            {{ category_text }}
          </a>
        {% endif %}
      {% endfor %}
    </nav>

    <div class="ai-header-logo-{{ ai_gen_id }}">
      <a href="{{ block.settings.logo_link | default: '/' }}" class="ai-header-logo-link-{{ ai_gen_id }}">
        {% if block.settings.logo %}
          <img
            src="{{ block.settings.logo | image_url: width: 400 }}"
            alt="{{ shop.name | escape }}"
            class="ai-header-logo-image-{{ ai_gen_id }}"
            width="{{ block.settings.logo.width }}"
            height="{{ block.settings.logo.height }}"
            loading="lazy"
          >
        {% else %}
          <div class="ai-header-logo-placeholder-{{ ai_gen_id }}">
            {{ 'image' | placeholder_svg_tag }}
          </div>
        {% endif %}
      </a>
    </div>

    <div class="ai-header-icons-{{ ai_gen_id }}">
      {% for i in (1..3) %}
        {% liquid
          assign icon_text_key = 'icon_' | append: i | append: '_text'
          assign icon_link_key = 'icon_' | append: i | append: '_link'
          assign icon_type_key = 'icon_' | append: i | append: '_type'
          assign icon_text = block.settings[icon_text_key]
          assign icon_link = block.settings[icon_link_key]
          assign icon_type = block.settings[icon_type_key]
        %}
        
        {% if icon_type != 'none' %}
          <a 
            href="{{ icon_link | default: '#' }}" 
            class="ai-header-icon-link-{{ ai_gen_id }}"
            aria-label="{{ icon_text | default: icon_type }}"
          >
            {% case icon_type %}
              {% when 'search' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              {% when 'user' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              {% when 'heart' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
              {% when 'cart' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
              {% when 'menu' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              {% when 'phone' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
              {% when 'mail' %}
                <svg class="ai-header-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
            {% endcase %}
            
            {% if icon_text != blank %}
              <span class="ai-header-icon-text-{{ ai_gen_id }}">{{ icon_text }}</span>
            {% endif %}
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</header-block-{{ ai_gen_id }}>

<script>
  (function() {
    class HeaderBlock{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.setupStickyHeader();
      }

      setupStickyHeader() {
        if (this.classList.contains('ai-header-{{ ai_gen_id }}')) {
          const headerStyle = getComputedStyle(this);
          if (headerStyle.position === 'sticky' || headerStyle.position === 'fixed') {
            this.handleStickyBehavior();
          }
        }
      }

      handleStickyBehavior() {
        let lastScrollY = window.scrollY;
        
        window.addEventListener('scroll', () => {
          const currentScrollY = window.scrollY;
          
          if (currentScrollY > lastScrollY && currentScrollY > 100) {
            this.style.transform = 'translateY(-100%)';
          } else {
            this.style.transform = 'translateY(0)';
          }
          
          lastScrollY = currentScrollY;
        });

        this.style.transition = 'transform 0.3s ease';
      }
    }

    customElements.define('header-block-{{ ai_gen_id }}', HeaderBlock{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Header block",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "position",
      "label": "Position",
      "options": [
        {
          "value": "relative",
          "label": "Normal"
        },
        {
          "value": "sticky",
          "label": "Sticky"
        },
        {
          "value": "fixed",
          "label": "Fixed"
        }
      ],
      "default": "sticky"
    },
    {
      "type": "range",
      "id": "padding_vertical",
      "min": 5,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Vertical padding",
      "default": 15
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#171171"
    },
    {
      "type": "color",
      "id": "text_hover_color",
      "label": "Text hover color",
      "default": "#72513c"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e5e5e5"
    },
    {
      "type": "range",
      "id": "border_thickness",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border thickness",
      "default": 1
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    },
    {
      "type": "url",
      "id": "logo_link",
      "label": "Logo link"
    },
    {
      "type": "range",
      "id": "logo_height",
      "min": 30,
      "max": 120,
      "step": 5,
      "unit": "px",
      "label": "Logo height",
      "default": 50
    },
    {
      "type": "header",
      "content": "Categories"
    },
    {
      "type": "text",
      "id": "category_1_text",
      "label": "Category 1 text",
      "default": "Shop"
    },
    {
      "type": "url",
      "id": "category_1_link",
      "label": "Category 1 link"
    },
    {
      "type": "text",
      "id": "category_2_text",
      "label": "Category 2 text",
      "default": "About"
    },
    {
      "type": "url",
      "id": "category_2_link",
      "label": "Category 2 link"
    },
    {
      "type": "text",
      "id": "category_3_text",
      "label": "Category 3 text",
      "default": "Contact"
    },
    {
      "type": "url",
      "id": "category_3_link",
      "label": "Category 3 link"
    },
    {
      "type": "text",
      "id": "category_4_text",
      "label": "Category 4 text"
    },
    {
      "type": "url",
      "id": "category_4_link",
      "label": "Category 4 link"
    },
    {
      "type": "range",
      "id": "category_spacing",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Category spacing",
      "default": 25
    },
    {
      "type": "range",
      "id": "category_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Category font size",
      "default": 16
    },
    {
      "type": "select",
      "id": "category_font_weight",
      "label": "Category font weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi-bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "Icons"
    },
    {
      "type": "select",
      "id": "icon_1_type",
      "label": "Icon 1 type",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "search",
          "label": "Search"
        },
        {
          "value": "user",
          "label": "User account"
        },
        {
          "value": "heart",
          "label": "Wishlist"
        },
        {
          "value": "cart",
          "label": "Shopping cart"
        },
        {
          "value": "menu",
          "label": "Menu"
        },
        {
          "value": "phone",
          "label": "Phone"
        },
        {
          "value": "mail",
          "label": "Email"
        }
      ],
      "default": "search"
    },
    {
      "type": "text",
      "id": "icon_1_text",
      "label": "Icon 1 text"
    },
    {
      "type": "url",
      "id": "icon_1_link",
      "label": "Icon 1 link"
    },
    {
      "type": "select",
      "id": "icon_2_type",
      "label": "Icon 2 type",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "search",
          "label": "Search"
        },
        {
          "value": "user",
          "label": "User account"
        },
        {
          "value": "heart",
          "label": "Wishlist"
        },
        {
          "value": "cart",
          "label": "Shopping cart"
        },
        {
          "value": "menu",
          "label": "Menu"
        },
        {
          "value": "phone",
          "label": "Phone"
        },
        {
          "value": "mail",
          "label": "Email"
        }
      ],
      "default": "user"
    },
    {
      "type": "text",
      "id": "icon_2_text",
      "label": "Icon 2 text"
    },
    {
      "type": "url",
      "id": "icon_2_link",
      "label": "Icon 2 link"
    },
    {
      "type": "select",
      "id": "icon_3_type",
      "label": "Icon 3 type",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "search",
          "label": "Search"
        },
        {
          "value": "user",
          "label": "User account"
        },
        {
          "value": "heart",
          "label": "Wishlist"
        },
        {
          "value": "cart",
          "label": "Shopping cart"
        },
        {
          "value": "menu",
          "label": "Menu"
        },
        {
          "value": "phone",
          "label": "Phone"
        },
        {
          "value": "mail",
          "label": "Email"
        }
      ],
      "default": "cart"
    },
    {
      "type": "text",
      "id": "icon_3_text",
      "label": "Icon 3 text"
    },
    {
      "type": "url",
      "id": "icon_3_link",
      "label": "Icon 3 link"
    },
    {
      "type": "range",
      "id": "icon_spacing",
      "min": 10,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Icon spacing",
      "default": 20
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 16,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Icon size",
      "default": 24
    },
    {
      "type": "range",
      "id": "icon_font_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Icon text size",
      "default": 14
    },
    {
      "type": "select",
      "id": "icon_font_weight",
      "label": "Icon text weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi-bold"
        }
      ],
      "default": "400"
    }
  ],
  "presets": [
    {
      "name": "Header block"
    }
  ]
}
{% endschema %}